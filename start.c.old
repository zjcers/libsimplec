#include "syscalls.h"
#include "stdint.h"
#include "stdlib.h"
#include "memory.h"
#include "start.h"
size_t supersecretargc;
const char** supersecretargv;
void _libc_start() {
  asm volatile ("popq %%rax;\n"
                "popq %%rcx;\n"
                "popq %%rdx;\n"
      : "=c" (supersecretargc), "=d" (supersecretargv)
      :
      :);
  init_malloc();
  int ret = main(supersecretargc, supersecretargv);
  asm volatile ("movq $0, %%rdi;\n"
      :
      :
      :);
  sys_exit(ret);
}
